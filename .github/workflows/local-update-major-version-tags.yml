name: üè∑Ô∏è Update Version Tags (Caller)

on:
  workflow_dispatch:
    inputs:
      use_gpg:
        description: "Use GPG signing via CLDMV_ secrets?"
        type: boolean
        required: true
        default: true
      sign:
        description: "sign mode: auto | true | false"
        required: false
        default: "auto"
      annotate:
        description: "annotate mode: auto | true | false"
        required: false
        default: "auto"
      create_documentation:
        description: "Create/update VERSION_TAGS.md"
        required: false
        default: "true"

permissions:
  contents: write

jobs:
  update-tags:
    uses: ./.github/workflows/update-major-version-tags.yml
    permissions:
      contents: write
    with:
      create_documentation: ${{ inputs.create_documentation }}
      sign: ${{ inputs.sign }}
      annotate: ${{ inputs.annotate }}
      # let the reusable decide whether to use secrets based on this flag
      use_gpg: ${{ inputs.use_gpg }}
    secrets:
      # map your repo/org secrets into generic names expected by the reusable
      TAGGER_NAME: ${{ secrets.CLDMV_BOT_NAME }}
      TAGGER_EMAIL: ${{ secrets.CLDMV_BOT_EMAIL }}
      GPG_PRIVATE_KEY: ${{ secrets.CLDMV_BOT_GPG_PRIVATE_KEY }}
      GPG_PASSPHRASE: ${{ secrets.CLDMV_BOT_GPG_PASSPHRASE }}
