# CLDMV/.github/.githujobs:
name: ðŸ“Œ Update Major Version Tags

on:
  workflow_call:
    inputs:
      create_documentation:
        description: "Whether to create/update VERSION_TAGS.md documentation"
        required: false
        type: boolean
        default: true
    outputs:
      major-version:
        description: "The major version tag that was updated"
        value: ${{ jobs.update-tags.outputs.major-version }}
      minor-version:
        description: "The minor version tag that was updated"
        value: ${{ jobs.update-tags.outputs.minor-version }}
      updated:
        description: "Whether tags were successfully updated"
        value: ${{ jobs.update-tags.outputs.updated }}

jobs:
  update-tags:
    name: "ðŸš€ Execute Tag Updates"
    # Run on: tag pushes or releases only (workflow_call bypasses this condition)
    if: github.ref_type == 'tag' || github.event_name == 'release'
    runs-on: ubuntu-latest
    outputs:
      major-version: ${{ steps.tags.outputs.major-version }}
      minor-version: ${{ steps.tags.outputs.minor-version }}
      updated: ${{ steps.tags.outputs.updated }}
      has-version-tags: ${{ steps.tags.outputs.has-version-tags }}
      should-run: ${{ steps.tags.outputs.should-run }}
    steps:
      - name: Check for version tags and update
        id: tags
        uses: CLDMV/.github/.github/actions/git/jobs/update-major-version-tags@v1
        with:
          create-documentation: ${{ inputs.create_documentation || 'true' }}
