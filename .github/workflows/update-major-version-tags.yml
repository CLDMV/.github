# .github/workflows/update-major-version-tags.yml
name: ðŸ“Œ Update Major Version Tags (Org-Level)

on:
  workflow_call:
    inputs:
      debug:
        description: "Enable debug logging for troubleshooting"
        required: false
        type: boolean
        default: false
      create_documentation:
        description: "Whether to create/update VERSION_TAGS.md documentation"
        required: false
        type: boolean
        default: true
      sign:
        description: "Smart signing mode (auto/true/false)"
        required: false
        type: string
        default: "auto"
      annotate:
        description: "Smart annotate mode (auto/true/false)"
        required: false
        type: string
        default: "auto"
      use_gpg:
        description: "If true, forward provided secrets to enable signing"
        required: false
        type: boolean
        default: false
    secrets:
      TAGGER_NAME:
        required: false
      TAGGER_EMAIL:
        required: false
      GPG_PRIVATE_KEY:
        required: false
      GPG_PASSPHRASE:
        required: false
      BOT_APP_ID:
        required: false
      BOT_APP_PRIVATE_KEY:
        required: false

permissions:
  contents: write

jobs:
  version-tag-operations:
    name: Version Tag Operations
    uses: CLDMV/.github/.github/workflows/ci-jobs.yml@v1
    permissions:
      contents: write
    with:
      package_name: "version-tags" # Required input, but not used for this operation
      debug: ${{ inputs.debug }}
      run_fix_bot_signatures: true
      run_update_version_tags: true
      create_documentation: ${{ inputs.create_documentation }}
      sign: ${{ inputs.sign }}
      annotate: ${{ inputs.annotate }}
      use_gpg: ${{ inputs.use_gpg }}
    secrets:
      TAGGER_NAME: ${{ secrets.TAGGER_NAME }}
      TAGGER_EMAIL: ${{ secrets.TAGGER_EMAIL }}
      GPG_PRIVATE_KEY: ${{ secrets.GPG_PRIVATE_KEY }}
      GPG_PASSPHRASE: ${{ secrets.GPG_PASSPHRASE }}
      BOT_APP_ID: ${{ secrets.BOT_APP_ID }}
      BOT_APP_PRIVATE_KEY: ${{ secrets.BOT_APP_PRIVATE_KEY }}
