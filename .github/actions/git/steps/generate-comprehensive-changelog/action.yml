name: "Generate Comprehensive Changelog"
description: "Generate detailed changelog with breaking changes, features, fixes, and contributors"

inputs:
  commits:
    description: "JSON array of categorized commits from get-commit-range"
    required: false
  commit-range:
    description: "Git commit range (fallback if commits not provided)"
    required: false

outputs:
  changelog-content:
    description: "Generated changelog content in markdown format"
    value: ${{ steps.changelog.outputs.changelog-content }}

runs:
  using: "composite"
  steps:
    - name: Generate comprehensive changelog
      id: changelog
      shell: bash
      env:
        COMMITS_INPUT: ${{ inputs.commits }}
        COMMIT_RANGE_INPUT: ${{ inputs.commit-range }}
      run: |
        # Run the Node.js script
        node "${{ github.action_path }}/action.mjs"
